#!/bin/sh

. "$THEME"

level=$(cat /sys/class/power_supply/BAT0/capacity)
status=$(cat /sys/class/power_supply/BAT0/status)

case "$status" in
    "Charging"|"Full") text="Char" ;;
    "Discharging") text="Bat" ;;
esac

if [ "$level" -le "10" ] && [ "$status" = "Discharging" ]; then
    text="Low"
    color="$RED"
elif [ "$level" -ge "90" ]; then
    color="$GREEN"
else
    color="$YELLOW"
fi

printf '%s%s%s %s%s\n' "B" "^c$color^" "$text" "$level%" "^d^"
